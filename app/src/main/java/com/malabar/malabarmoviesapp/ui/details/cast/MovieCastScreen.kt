package com.malabar.malabarmoviesapp.ui.details.cast

import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxHeight
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.shape.CircleShape
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.ModalBottomSheet
import androidx.compose.material3.rememberModalBottomSheetState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.clip
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import coil3.compose.AsyncImage
import com.malabar.core.AppConstants.Companion.MOVIE_IMAGE_W_500


@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun MovieCastScreen(
    castName: String,
    castCharacter: String,
    castImage: String,
    id: Int,
    onClick: () -> Unit = {}
) {
    var showBottomSheet by remember { mutableStateOf(false) }
    val sheetState = rememberModalBottomSheetState(
        skipPartiallyExpanded = false,
    )
    Column(
        modifier = Modifier
            .clickable(onClick = { showBottomSheet = true })
    ) {
        AsyncImage(
            model = "$MOVIE_IMAGE_W_500$castImage",
            contentDescription = castName,
            contentScale = ContentScale.Crop,
            modifier = Modifier
                .size(100.dp)
                .padding(5.dp)
                .clip(CircleShape)
        )
        if (showBottomSheet) {
            ModalBottomSheet(
                modifier = Modifier.fillMaxHeight(),
                sheetState = sheetState,
                onDismissRequest = { showBottomSheet = false }
            ) {
                CastInfoScreen(id)
                /*Text(
                    "Swipe up to open sheet. Swipe down to dismiss.",
                    modifier = Modifier.padding(16.dp)
                )*/
            }
        }
    }

}

@Preview(showSystemUi = true)
@Composable
fun MovieCastScreenPreview() {
    MovieCastScreen(
        castName = "Morgan Freeman",
        castCharacter = "Ellis Boyd 'Red' Redding",
        castImage = "data:image/jpeg;base64,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",
        id = 1
    )
}